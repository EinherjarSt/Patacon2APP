<mat-sidenav-container  class="example-container" *ngIf="shouldRun" >
  <mat-sidenav #sidenav [mode]="'side'"[position]="'end'" [opened]="'true'">
    <mat-accordion>
      <mat-expansion-panel [expanded]="'any'">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Despachos
          </mat-panel-title>
          <mat-panel-description> </mat-panel-description>
        </mat-expansion-panel-header>
        <!--Aqui va los filtros-->
        <app-filters (selectedChangeEvent)="mapUpdate($event)"></app-filters>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Ãšltimos eventos
          </mat-panel-title>
          <mat-panel-description> </mat-panel-description>
        </mat-expansion-panel-header>
        <!--Aqui va los ultimos eventos-->
        <app-latest-events></app-latest-events>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-sidenav>

  <mat-sidenav-content>
 
        <div class="map-content"> 
          
          <mat-button-toggle class="sidenav-button" mat-button 
          (click)="sidenav.toggle(); state = !state"><mat-icon>keyboard_arrow_{{direction}}</mat-icon></mat-button-toggle>
          <agm-map [latitude]="center.latitude" [longitude]="center.longitude" (mapReady)="onMapReady($event)" (mapClick)="onMapClick($event)">
            <agm-marker *ngFor="let imei of gpsKey" [latitude]="gpsPosition[imei].location?.latitude" [longitude]="gpsPosition[imei].location?.longitude">
              <agm-info-window>
                IMEI: {{imei}} <br>
                <div *ngIf="dispatchInfo[imei]">
                    Patente: {{dispatchInfo[imei].truckLicensePlate}} <br>
                    Chofer: {{dispatchInfo[imei].driverName}} <br>
                    Telefono: {{dispatchInfo[imei].driverPhoneNumber}} <br>
                    Estado: {{dispatchInfo[imei].dispatchStatus}}
                </div>
              </agm-info-window>
            </agm-marker>
          </agm-map>
         
        </div>
        
    
  </mat-sidenav-content>
</mat-sidenav-container>
